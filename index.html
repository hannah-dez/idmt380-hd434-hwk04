<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Standard Tap Philadelphia</title>
  <meta name="description" content="The home of local beer in Philadelphia. 21 drafts and 2 hand pumps complement a changing, locally sourced chalkboard menu." />
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <header>
    <a href="#main" class="skip-link">Skip to main content</a>

    <div class="site-branding">
      <a href="/">
        <img src="https://images.squarespace-cdn.com/content/v1/5dd43005931aab7d2c9b4cdf/1574188395319-GMSWC31FBBBBGD2QSYED/standardtaplogo.png"
            alt="Red Circle with Yellow 'Standard Tap' Words, Links to Home Page" />
      </a>
      <h1>Eat Local | Drink Local</h1>
    </div>
    
  
    <button class="hamburger" aria-label="Toggle menu" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="header-menu closed" aria-label="Primary Menu">
      <ul aria-label="Navigation">
        <li aria-label="Home"><a href="#">Home</a></li>
        <li aria-label="About Us"><a href="#">About Us</a></li>
        <li aria-label="Inside The Tap"><a href="#">Inside The Tap</a></li>
        <li aria-label="Jobs"><a href="#">Jobs</a></li>
        <li class="social" aria-label="Standard Tap on Instagram (opens in a new tab)">
          <a href="" rel="noopener noreferrer">
            <img src="assets/insta-logo.svg" data-light="assets/insta-logo.svg" data-dark="assets/insta-dark-logo.svg" alt="Instagram Logo"/>
          </a>
        </li>
        <li class="social" aria-label="Standard Tap on Facebook (opens in a new tab)">
          <a href="" rel="noopener noreferrer">
            <img src="assets/fb-logo.svg" data-light="assets/fb-logo.svg" data-dark="assets/fb-dark-logo.svg" alt="Facebook Logo"/>
          </a>
        </li>
      </ul><!--ADD IN TARGET="BLANK"-->

      <div class="dyslexia-toggle" aria-label="accessibility options">
        <span id="dyslexia-label">Dyslexia Mode</span>
        <button id="dyslexia-toggle" class="switch" role="switch" aria-checked="false" aria-label="Toggle Dyslexia Mode">
          <span class="switch-handle"></span>
        </button>
      </div>
    </nav> 
  </header>


  <main id="main" tabindex="-1">
    <article class="main-box" aria-label="Location, Menu, and Visit Navigation">
      <address aria-label="Address">901 N 2nd St | Northern Liberties | Philadelphia, PA</address>

      <nav class="primary-actions" aria-label="Menu and Visit Navigation">
        <ul aria-label="Menu and Visit Navigation">
          <li aria-label="Eat"><a href="#" data-bg="food" class="action-link">Eat</a></li>
          <li aria-label="Drink"><a href="#" data-bg="drink" class="action-link">Drink</a></li>
          <li aria-label="Visit"><a href="#" data-bg="visit" class="action-link">Visit</a></li>
          <li aria-label="Happy Hour"><a href="#" data-bg="happy" class="action-link">Happy Hour</a></li>
        </ul>
      </nav>
    </article>
  </main>

  <script>
    const toggle = document.getElementById("dyslexia-toggle");

    // Load saved preference
    const isOn = localStorage.getItem("dyslexia") === "on";
    if (isOn) {
      document.body.classList.add("dyslexia-mode");
      toggle.setAttribute("aria-checked", "true");
    }

    toggle.addEventListener("click", () => {
      const enabled = document.body.classList.toggle("dyslexia-mode");
      toggle.setAttribute("aria-checked", enabled.toString());
      localStorage.setItem("dyslexia", enabled ? "on" : "off");
    });

    const links = document.querySelectorAll("[data-bg]");
    const body = document.body;

    links.forEach(link => {
      const bgClass = `bg-${link.dataset.bg}`;
      link.addEventListener("mouseenter", () => body.classList.add(bgClass));
      link.addEventListener("mouseleave", () => body.classList.remove(bgClass));
      link.addEventListener("focus", () => body.classList.add(bgClass));
      link.addEventListener("blur", () => body.classList.remove(bgClass));
    });

    const updateSocialIcons = () => {
      const isDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
      document.querySelectorAll(".social img").forEach(img => {
        img.src = isDark ? img.dataset.dark : img.dataset.light;
      });
    };

    updateSocialIcons();
    window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change", updateSocialIcons);

const hamburger = document.querySelector(".hamburger");
const headerMenu = document.querySelector(".header-menu");
 const dyslexiaToggle = document.getElementById("dyslexia-toggle");

  hamburger.addEventListener("click", () => {
    const isOpen = headerMenu.classList.toggle("closed") === false;
    hamburger.setAttribute("aria-expanded", isOpen.toString());
  });

  // Close hamburger menu when tabbing past dyslexia toggle (mobile only)
  dyslexiaToggle.addEventListener("keydown", (e) => {
    const isTab = e.key === "Tab";
    const isShift = e.shiftKey;
    const isMobile = window.matchMedia("(max-width: 768px)").matches;
    const menuIsOpen = !headerMenu.classList.contains("closed");

    // Forward tab only, mobile only, menu open
    if (isTab && !isShift && isMobile && menuIsOpen) {
      headerMenu.classList.add("closed");
      hamburger.setAttribute("aria-expanded", "false");
    }
  });
const mediaQuery = window.matchMedia("(min-width: 769px)");

function handleResize(e) {
  if (e.matches) {
    // Desktop: always show nav
    headerMenu.classList.remove("closed");
    hamburger.setAttribute("aria-expanded", "true");
  } else {
    // Mobile: hide nav by default
    headerMenu.classList.add("closed");
    hamburger.setAttribute("aria-expanded", "false");
  }
}

// Run once on load
handleResize(mediaQuery);

// Run on resize
mediaQuery.addEventListener("change", handleResize);

  </script>
</body>
</html>

